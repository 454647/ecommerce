{% extends 'products/base.html' %}
{% load  static %}
{% load extras %}

{% block cssload %}
{% endblock %}

{% block content %}


    <div id="product" class="section-container p-t-20">
        <!-- BEGIN container -->
        <div class="container">
            <!-- BEGIN breadcrumb -->
            <ul class="breadcrumb m-b-10 f-s-12">
                <li><a href="#">Home</a></li>
                <li><a href="#">Mobile Phone</a></li>
                <li><a href="#">Apple</a></li>
                <li class="active">iPhone 6S Plus</li>
            </ul>
            <!-- END breadcrumb -->

            <!-- BEGIN product -->
            <div class="product">
                <!-- BEGIN product-detail -->
                <div class="product-detail">
                    <!-- BEGIN product-image -->
                    <div class="product-image">
                        <!-- BEGIN product-thumbnail -->
                        <div class="product-thumbnail">
                            <ul class="product-thumbnail-list">
                                <li class="active"><a href="#" data-click="show-main-image"
                                                      data-url="assets/img/iphone-6s-plus-2.jpg"><img
                                        src="{% static 'products/img/iphone-6s-plus-2.jpg' %}" alt=""/></a></li>
                                <li><a href="#" data-click="show-main-image" data-url="assets/img/iphone-6s-plus-3.jpg"><img
                                        src="{% static 'products/img/iphone-6s-plus-3.jpg' %}" alt=""/></a></li>
                                <li><a href="#" data-click="show-main-image" data-url="assets/img/iphone-6s-plus-4.jpg"><img
                                        src="{% static 'products/img/iphone-6s-plus-4.jpg' %}" alt=""/></a></li>
                                <li><a href="#" data-click="show-main-image" data-url="assets/img/iphone-6s-plus-5.jpg"><img
                                        src="{% static 'products/img/iphone-6s-plus-5.jpg' %}" alt=""/></a></li>
                                <li><a href="#" data-click="show-main-image" data-url="assets/img/iphone-6s-plus-6.jpg"><img
                                        src="{% static 'products/img/iphone-6s-plus-6.jpg' %}" alt=""/></a></li>
                                <li><a href="#" data-click="show-main-image" data-url="assets/img/iphone-6s-plus-7.jpg"><img
                                        src="{% static 'products/img/iphone-6s-plus-7.jpg' %}" alt=""/></a></li>
                            </ul>
                        </div>
                        <!-- END product-thumbnail -->
                        <!-- BEGIN product-main-image -->
                        <div class="product-main-image" data-id="main-image">
                        <img src="{% if product.product_image %}{{ product.product_image.url }}
                            {% else  %}{% static 'products/img/test.png' %}{% endif %}
                        " alt=""/>
                        </div>
                        <!-- END product-main-image -->
                    </div>
                    <!-- END product-image -->
                    <!-- BEGIN product-info -->
                    <div class="product-info">
                        <!-- BEGIN product-info-header -->
                        <div class="product-info-header">
                            <h1 class="product-title"><span
                                    class="label label-success">{{ product|calculate_discount }} OFF</span>{{ product.product_name }}
                            </h1>
                            <ul class="product-category">
                                <li><a href="#">iPhone</a></li>
                                <li>/</li>
                                <li><a href="#">mobile phone</a></li>
                                <li>/</li>
                                <li><a href="#">electronics</a></li>
                                <li>/</li>
                                <li><a href="#">lifestyle</a></li>
                            </ul>
                        </div>
                        <!-- END product-info-header -->
                        <!-- BEGIN product-warranty -->
                        <div class="product-warranty">
                            <div class="pull-right">{{ product.product_available|availability_status }}</div>
                            <div><b>1 Year</b> Local Manufacturer Warranty</div>
                        </div>
                        <!-- END product-warranty -->
                        <!-- BEGIN product-info-list -->

                        <ul class="product-info-list">
                            {% for l in product.product_Description.splitlines %}
                                <li><i class="fa fa-circle"></i>{{ l }}</li>
                            {% endfor %}
                        </ul>
                        <!-- END product-info-list -->
                        <!-- BEGIN product-social -->
                        <div class="product-social">
                            <ul>
                                <li><a href="javascript:" class="facebook" data-toggle="tooltip" data-trigger="hover"
                                       data-title="Facebook" data-placement="top"><i class="fa fa-facebook"></i></a>
                                </li>
                                <li><a href="javascript:" class="twitter" data-toggle="tooltip" data-trigger="hover"
                                       data-title="Twitter" data-placement="top"><i class="fa fa-twitter"></i></a></li>
                                <li><a href="javascript:" class="google-plus" data-toggle="tooltip"
                                       data-trigger="hover" data-title="Google Plus" data-placement="top"><i
                                        class="fa fa-google-plus"></i></a></li>
                                <li><a href="javascript:" class="whatsapp" data-toggle="tooltip" data-trigger="hover"
                                       data-title="Whatsapp" data-placement="top"><i class="fa fa-whatsapp"></i></a>
                                </li>
                                <li><a href="javascript:" class="tumblr" data-toggle="tooltip" data-trigger="hover"
                                       data-title="Tumblr" data-placement="top"><i class="fa fa-tumblr"></i></a></li>
                            </ul>
                        </div>
                        <!-- END product-social -->
                        <!-- BEGIN product-purchase-container -->
                        <div class="product-purchase-container">
                            <div class="product-discount">
                                <span class="discount">{{ product.product_price }}</span>
                            </div>
                            <div class="product-price">
                                <div class="price">{{ product|discounted_price }}</div>
                            </div>
                            <button class="btn btn-inverse btn-lg" type="submit">ADD TO CART</button>
                        </div>
                        <!-- END product-purchase-container -->
                    </div>
                    <!-- END product-info -->
                </div>
                <!-- END product-detail -->
                <!-- BEGIN product-tab -->
                <div class="product-tab">
                    <!-- BEGIN #product-tab -->
                    <ul id="product-tab" class="nav nav-tabs">
                        <li class="active"><a href="#product-desc" data-toggle="tab">Product Description</a></li>
                        <li class=""><a href="#product-info" data-toggle="tab">Additional Information</a></li>
                        <li class=""><a href="#product-reviews" data-toggle="tab">Rating & Reviews (5)</a></li>
                    </ul>
                    <!-- END #product-tab -->
                    <!-- BEGIN #product-tab-content -->
                    <div id="product-tab-content" class="tab-content">
                        <!-- BEGIN #product-desc -->
                        <div class="tab-pane fade active in" id="product-desc">
                            {% for c in product.product_detail.all %}
                                {% if forloop.counter|is_even %}
                                    <!-- BEGIN product-desc -->
                                    <div class="product-desc">
                                        <div class="image">
                                            <img src="
                                            {% if c.detail_image %}{{ c.detail_image.url }}
                                            {% else  %}{% static 'products/img/test.png' %}{% endif %}
                                            " alt=""/>
                                        </div>
                                        <div class="desc">
                                            <h4>iPhone 6s</h4>
                                            <p>{{ c.detail_description }}</p>
                                        </div>
                                    </div>
                                    <!-- END product-desc -->
                                {% else %}
                                    <!-- BEGIN product-desc -->
                                    <div class="product-desc right">
                                        <div class="image">
                                            <img src="
                                            {% if c.detail_image %}{{ c.detail_image.url }}
                                            {% else  %}{% static 'products/img/test.png' %}{% endif %}
                                        " alt=""/></div>
                                        <div class="desc">
                                            <h4>iPhone 6s</h4>
                                            <p>{{ c.detail_description }}</p>
                                        </div>
                                    </div>
                                    <!-- END product-desc -->
                                {% endif %}
                            {% endfor %}

                        </div>
                        <!-- END #product-desc -->
                        <!-- BEGIN #product-info -->
                        <div class="tab-pane fade" id="product-info">
                            <!-- BEGIN table-responsive -->
                            <div class="table-responsive">
                                <!-- BEGIN table-product -->
                                <table class="table table-product table-striped">
                                    <thead>
                                    <tr>
                                        <th></th>
                                        <th>iPhone 6s</th>
                                        <th>iPhone 6s Plus</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td class="field">Capacity</td>
                                        <td>
                                            16GB<br/>
                                            64GB<br/>
                                            128GB
                                        </td>
                                        <td>
                                            16GB<br/>
                                            64GB<br/>
                                            128GB
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="field">Weight and Dimensions</td>
                                        <td>
                                            5.44 inches (138.3 mm) x 2.64 inches (67.1 mm) x 0.28 inch (7.1 mm)<br/>
                                            Weight: 5.04 ounces (143 grams)
                                        </td>
                                        <td>
                                            6.23 inches (158.2 mm) x 3.07 inches (77.9 mm) x 0.29 inch (7.3 mm)<br/>
                                            Weight: 6.77 ounces (192 grams)
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="field">Display</td>
                                        <td>
                                            Retina HD display with 3D Touch<br/>
                                            4.7-inch (diagonal) LED-backlit widescreen<br/>
                                            1334-by-750-pixel resolution at 326 ppi<br/>
                                            1400:1 contrast ratio (typical)<br/>
                                            <br/>
                                            <b>Both models:</b><br/>
                                            500 cd/m2 max brightness (typical)<br/>
                                            Full sRGB standard<br/>
                                            Dual-domain pixels for wide viewing angles<br/>
                                            Fingerprint-resistant oleophobic coating on front<br/>
                                            Support for display of multiple languages and characters simultaneously<br/>
                                            Display Zoom<br/>
                                            Reachability
                                        </td>
                                        <td>
                                            Retina HD display with 3D Touch<br/>
                                            5.5-inch (diagonal) LED-backlit widescreen<br/>
                                            1920-by-1080-pixel resolution at 401 ppi<br/>
                                            1300:1 contrast ratio (typical)
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="field">Chip</td>
                                        <td colspan="2">
                                            A9 chip with 64-bit architecture Embedded M9 motion coprocessor
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="field">iSight Camera</td>
                                        <td colspan="2">
                                            New 12-megapixel iSight camera with 1.22µ pixels<br/>
                                            Live Photos<br/>
                                            Autofocus with Focus Pixels<br/>
                                            Optical image stabilization (iPhone 6s Plus only)<br/>
                                            True Tone flash<br/>
                                            Panorama (up to 63 megapixels)<br/>
                                            Auto HDR for photos<br/>
                                            Exposure control<br/>
                                            Burst mode<br/>
                                            Timer mode<br/>
                                            ƒ/2.2 aperture<br/>
                                            Five-element lens<br/>
                                            Hybrid IR filter<br/>
                                            Backside illumination sensor<br/>
                                            Sapphire crystal lens cover<br/>
                                            Auto image stabilization<br/>
                                            Improved local tone mapping<br/>
                                            Improved noise reduction<br/>
                                            Face detection<br/>
                                            Photo geotagging
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="field">Video Recording</td>
                                        <td colspan="2">
                                            4K video recording (3840 by 2160) at 30 fps<br/>
                                            1080p HD video recording at 30 fps or 60 fps<br/>
                                            720p HD video recording at 30 fps<br/>
                                            Optical image stabilization for video (iPhone 6s Plus only)<br/>
                                            True Tone flash<br/>
                                            Slo-mo video support for 1080p at 120 fps and 720p at 240 fps<br/>
                                            Time-lapse video with stabilization<br/>
                                            Cinematic video stabilization (1080p and 720p)<br/>
                                            Continuous autofocus video<br/>
                                            Improved noise reduction<br/>
                                            Take 8MP still photos while recording 4K video<br/>
                                            Playback zoom<br/>
                                            3x zoom<br/>
                                            Face detection<br/>
                                            Video geotagging
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                                <!-- END table-product -->
                            </div>
                            <!-- END table-responsive -->
                        </div>
                        <!-- END #product-info -->
                        <!-- BEGIN #product-reviews -->
                        <div class="tab-pane fade" id="product-reviews">
                            <!-- BEGIN row -->
                            <div class="row row-space-30">
                                <!-- BEGIN col-7 -->
                                <div class="col-md-7">
                                    {% for i in product.product_review.all %}

                                        <!-- BEGIN review -->
                                        <div class="review">
                                            <div class="review-info">
                                                <div class="review-icon"><img
                                                        src="{% static 'products/img/user-1.jpg' %}" alt=""/></div>
                                                <div class="review-rate">
                                                    <ul class="review-star">
                                                        {% for x in 5|get_array %}
                                                            {% if x < i.rating_rating %}
                                                                <li class="active"><i class="fa fa-star"></i></li>
                                                            {% else %}
                                                                <li class=""><i class="fa fa-star-o"></i></li>
                                                            {% endif %}
                                                        {% endfor %}

                                                    </ul>
                                                    ({{ i.rating_rating }}/5)
                                                </div>
                                                <div class="review-name rating-username">{{ i.rating_user.username }}</div>
                                                <div class="review-date">{{ i.rating_time }}</div>
                                            </div>
                                            <div class="review-title">{{ i.rating_title }} </div>
                                            <div class="review-message"> {{ i.rating_review }} </div>
                                        </div>
                                        <!-- END review -->
                                    {% endfor %}
                                </div>
                                <!-- END col-7 -->
                                <!-- BEGIN col-5 -->
                                <div class="col-md-5">
                                    <!-- BEGIN review-form -->

                                {% if messages %}
                                <div id="alert" class="alert" >
                                <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                                    {% for message in messages %}
                                    <p{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</p>
                                    {% endfor %}
                                </div>
                                {% endif %}

                                    <div class="review-form">
                                        <form id="rating-form" name="review_form" method="POST" novalidate
                                              action="{% url 'products:product_detail' product.id  %}?active_tab=error" >

                                            {% csrf_token %}
                                            <h2>Write a review</h2>

                                                {{ form.rating_user }}
                                                <div class = error>
                                                        {% for error in form.rating_user.errors %}
                                                        {{ error }}
                                                        {% endfor %}
                                                </div>

                                                <br>
                                                <label for="id_rating_title">Title <span class="text-danger">*</span></label>
                                                {{ form.rating_title }}
                                                <div class = error>
                                                {% for error in form.rating_title.errors %}
                                                {{ error }}
                                                {% endfor %}</div>
                                               <br>
                                                <div class="form-group">
                                                    <label for="review">Review <span class="text-danger">*</span></label>

                                                    {{ form.rating_review }}
                                                <div class = error>
                                                    {% for error in form.rating_review.errors %}
                                                    {{ error }}
                                                    {% endfor %}
                                                </div>
                                                    <br>
                                                </div>
                                                <div class="form-group">

                                                </div>
                                                <div class="form-group">
                                                    <label id="rating-label" for="rating">Rating <span class="text-danger">* : &nbsp;&nbsp;</span></label>
                                                    {{ form.rating_rating }}
                                                    <div class = error>
                                                        {% for error in form.rating_rating.errors %}
                                                        {{ error }}
                                                        {% endfor %}
                                                    </div>
                                                    <div id="rating_error">

                                                    </div>

                                                </div>
                                                <p>
                                                    <button id="rating_submit" type="submit"  class="btn btn-inverse btn-lg has-spinner">
                                                            <span class="spinner"><i class="fa fa-refresh fa-spin">
                                                            </i></span> Submit Review
                                                    </button>
                                                </p>
{#                                                <button id="rating_submit" type="submit" class="btn btn-inverse btn-lg">Submit Review#}
{#                                                </button>#}
                                        </form>
                                    </div>
                                    <!-- END review-form -->
                                </div>
                                <!-- END col-5 -->
                            </div>
                            <!-- END row -->
                        </div>
                        <!-- END #product-reviews -->
                    </div>
                    <!-- END #product-tab-content -->
                </div>
                <!-- END product-tab -->
            </div>
            <!-- END product -->

            <!-- BEGIN similar-product -->
            <h4 class="m-b-15 m-t-30">You Might Also Like</h4>
            <div class="row row-space-10">
            {% for p in products %}
                <div class="col-md-2 col-sm-4">
                    <!-- BEGIN item -->
                    <div class="item item-thumbnail">

                        <a href="{% url "products:product_detail" pk=p.pk %}" class="item-image">
                            <img src="
                            {% if p.product_image %}{{ p.product_image.url }}
                            {% else  %}{% static 'products/img/test.png' %}{% endif %}
                            " alt=""/>
                            <div class="discount">{{ p|calculate_discount }} OFF</div>
                        </a>
                        <div class="item-info">
                            <h4 class="item-title"><a href="{% url "products:product_detail" pk=p.pk %}">{{ p.product_name }}<br/></a></h4>
                            <p class="item-desc">{{ p.product_Description }}</p>
                            <div class="item-price">{{ p|discounted_price }}</div>
                            <div class="item-discount-price">{{ p.product_price }}</div>
                        </div>
                    </div>
                    <!-- END item -->
                </div>
            {% endfor %}
            </div>
            <!-- END similar-product -->
        </div>
        <!-- END container -->
    </div>
{% endblock %}

{% block javascriptload %}
    <script src="{% static 'products/js/scripts.js' %}"></script>
{% endblock %}